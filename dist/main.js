!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){},function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=JSON.parse(e),i=Array.isArray(a)?a:[a];i=function(e){var t=[],r=new Set;e.forEach(function(e){t=Object.keys(e);var n=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var c=i.value;r.has(c)||r.add(c)}}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}});var a=n(e);return r.forEach(function(e){a.forEach(function(t){void 0===t[e]&&(t[e]=null)})}),a}(i);for(var l=0;l<i.length;l++)i[l]=o(i[l],t);var c=[],s=Object.keys(i[0]);if(r){var u=s.join(t);c.push(u)}var d=!0,v=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){for(var y=h.value,p=Object.entries(y),m=[],S=function(){var e=L[b];m.push(p.find(function(t){return e===t[0]})[1])},b=0,L=s;b<L.length;b++)S();var x=Object.values(m).join(t);c.push(x)}}catch(e){v=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(v)throw f}}return c.join("\n")}function o(e,t){for(var r=null,n=0,a=Object.entries(e);n<a.length;n++){var o=a[n];if(Array.isArray(o[1])){var l=!0,c=!1,s=void 0;try{for(var u,d=o[1][Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var v=u.value;if(i(v)){r="Nested JSON are not allowed";break}-1!==v.toString().indexOf('"')&&(e[o[0][v]]=v.toString().replace(/"/g,'""'))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}if(i(o[1])){r="Nested JSON are not allowed";break}o[1]&&-1!==o[1].toString().indexOf('"')&&(e[o[0]]=o[1].toString().replace(/"/g,'""')),!o[1]||-1===o[1].toString().indexOf(t)&&-1===o[1].toString().indexOf("\r")&&-1===o[1].toString().indexOf("\n")||(e[o[0]]='"'.concat(o[1].toString(),'"'))}if(r)throw new Error(r);return e}function i(e){return!!e&&e.constructor===Object}function l(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(e,t){for(var r=[c(e[0].split(t))],n=r[0].length,a=[],o=1;o<e.length;o++){var i=e[o].split(t),l=c(i);r.push(l),l.length!==n&&(a.push("row_".concat(o+1,": Different number of fields detected at line ").concat(o+1," (other_rows_current_max_fields: ").concat(n,", own_fields: ").concat(l.length,")")),l.length>n&&(n=l.length))}if(0!==Object.keys(a).length)throw Error(a.join("\n"));return r}(c(e.split("\n")),n);a?(t=o[0],r=o.length>1?o.slice(1):o[0].map(function(e){return"test"})):(t=o[0].map(function(e,t){return"key_"+(+t+1)}),r=o);var i=[],l=!0,s=!1,u=void 0;try{for(var d,v=r[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var f=d.value,h={};Array.isArray(f)||(f=[f]);for(var g=0;g<f.length;g++){var y=t[g].replace(/"/g,"").trim(),p=void 0;p=""===f[g]?null:f[g].replace(/"/g,"").trim(),h[y]=p}console.log("tmp",h),i.push(h)}}catch(e){s=!0,u=e}finally{try{l||null==v.return||v.return()}finally{if(s)throw u}}return i}function c(e){var t=e.slice(),r=0,n=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){r+=s('"',i.value).length}}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}if(r%2==1)throw Error("Odd number of quotes detected. Please check the provided file.");var c=[];do{var u=[];c=[];for(var d=0;d<t.length;d++){var v=s('"',t[d]);r+=v.length,v.length%2==1&&c.push(d)}0!==c.length&&(u=t[c[0]].concat(t[+c[0]+1]),t.splice(c[0],2,u))}while(0!==c.length);return t}function s(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[],a=t.indexOf(e,r);-1!==a;)n.push(a),a=t.indexOf(e,a+1);return n}r.r(t);r(0),document.querySelector("#main-container");var u=document.querySelector("#toggler"),d=document.querySelector("#header-options"),v=document.querySelector("#swap-areas"),f=document.querySelector("#split-h"),h=document.querySelector("#split-v"),g=document.querySelector("#panel"),y=document.querySelector("#save-btn"),p=document.querySelector("#load-btn"),m=document.querySelector("#load-btn span"),S=document.querySelector("#loader"),b=document.querySelector("#beautify"),L=document.querySelector("#upper-area"),x=document.querySelector("#close-upper-area"),O=document.querySelector("#split-area"),w=document.querySelector(" #lower-area"),E=document.querySelector("#lower-area-wrapper"),j=document.querySelector("#close-lower-area"),q=document.querySelector("#metadata"),k=document.querySelector("#metadata-wrapper"),T=document.querySelector("#metadata-label"),A=document.querySelector("#convert-btn"),_=document.querySelector("#notification"),N=document.querySelector("#notification button"),J=document.querySelector("#notification-title"),z=document.querySelector("#notification-body"),F=document.querySelector("#delimiter"),M=document.querySelector("#first-line"),P=document.querySelector("#commands");function C(e){return"csv"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv")?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",n=c(e.split("\n")),a=0,o=!0,i=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value,v=d.split(t),f=!0,h=!1,g=void 0;try{for(var y,p=v[Symbol.iterator]();!(f=(y=p.next()).done);f=!0){var m=y.value;m.length>a&&(a=m.length)}}catch(e){h=!0,g=e}finally{try{f||null==p.return||p.return()}finally{if(h)throw g}}}}catch(e){i=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}var S=[],b=!0,L=!1,x=void 0;try{for(var O,w=n[Symbol.iterator]();!(b=(O=w.next()).done);b=!0){for(var E=O.value,j=E.split(t),q=0;q<j.length;q++)j[q].length>a&&(a=j[q].length),j[q]=j[q]+r.repeat(a-j[q].length);S.push(j.join(t))}}catch(e){L=!0,x=e}finally{try{b||null==w.return||w.return()}finally{if(L)throw x}}return S.join("\n")}(e,","):JSON.stringify(JSON.parse(e),void 0,2)}var I,D="csv",H="json",U=0,W="",B={name:"myFile",size:0};function R(){I=w.value=L.value;try{U?(L.value="",q.value="",q.disabled=!0,T.innerText="Metadata:",w.value="",A.disabled=!0,V(),U=0):(!function(){y.disabled=""===L.value;var e=F.value,t=M.checked;if("csv"===D){var r=l(I,e,t);W=L.value=JSON.stringify(r,void 0,2)}else{var n=a(L.value,e,t);W=L.value=n}}(),G("Conversion successful!","","success",!0),q.value="".concat(B.name,".").concat(H),q.disabled=!1,T.innerText="Save file as:",U=1)}catch(t){var e=t.message.startsWith("JSON.parse")?t.message.replace("JSON.parse: ",""):t.message;return void G("Error - invalid ".concat(D),e,"error")}g.classList.toggle("inverse"),g.classList.toggle("stretch"),x.classList.toggle("hidden"),S.value=null,d.classList.toggle("hidden"),toggler.classList.toggle("hidden")}function V(){O.classList.remove("h"),E.classList.add("hidden")}function G(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];J.innerText=e,z.innerText=t,_.classList.remove("exit"),_.classList.remove("fade-out"),_.classList.remove("error"),_.classList.remove("success"),_.classList.add(r),n?(_.classList.add("fade-in"),setTimeout(function(){_.classList.remove("fade-in"),_.classList.add("fade-out")},1e3)):_.classList.add("enter")}L.value="",q.value="",u.addEventListener("click",function(){D="json"===D?"csv":"json",H="json"===H?"csv":"json",L.value="",q.value="",S.value=null,A.disabled=!0,b.disabled=!0,y.disabled=!0,m.innerText="SELECT ".concat(D.toUpperCase()," FILE"),y.innerText="SAVE ".concat(H.toUpperCase()),toggler.innerHTML="".concat(D," to ").concat(H," <span>&rlarr;</span>")}),b.addEventListener("click",function(){try{L.value=C(L.value,D)}catch(t){var e=t.message.startsWith("JSON.parse")?t.message.replace("JSON.parse: ",""):t.message;return void G("Error - invalid ".concat(D),e,"error")}}),A.addEventListener("click",R),L.addEventListener("input",function(e){A.disabled=""===e.target.value,y.disabled=""===e.target.value,b.disabled=""===e.target.value}),L.addEventListener("paste",function(e){var t=e.clipboardData.getData("text/plain");B={name:"myFile",size:t.length},q.value="\n        File name: ".concat(B.name,"  - File size: approx. ").concat(B.size," bytes\n    ")}),v.addEventListener("click",function(){g.classList.toggle("inverse"),p.classList.toggle("hidden"),b.classList.toggle("hidden"),x.classList.toggle("hidden"),k.classList.toggle("hidden"),P.classList.toggle("hidden"),U?(L.value=I,V(),v.innerHTML="&rarrhk; see result",f.disabled=!0,h.disabled=!0,U=0):(L.value=W,v.innerHTML="&larrhk; see original",f.disabled=!1,h.disabled=!1,U=1)}),x.addEventListener("click",R),h.addEventListener("click",function(){O.classList.contains("h")?O.classList.remove("h"):E.classList.toggle("hidden")}),f.addEventListener("click",function(){E.classList.contains("hidden")||O.classList.contains("h")?(O.classList.toggle("h"),E.classList.toggle("hidden")):O.classList.add("h")}),j.addEventListener("click",V),S.addEventListener("change",function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",r=arguments.length>2?arguments[2]:void 0,n=new FileReader,a="csv"===t?["text/plain","text/csv","text/tsv"]:["text/plain","application/json"];n.onload=function(t){r(null,{data:t.target.result,metadata:{name:e.name.substring(0,e.name.lastIndexOf(".")),size:e.size}})},a.includes(e.type)||(["text/plain","text/csv","text/tsv","application/json"].includes(e.type)?r(Error("Please switch mode to handle this kind of file (".concat(e.type,")"))):r(Error("file ".concat(e.type," not supported!")))),n.readAsText(e)}(e.target.files[0],D,function(e,t){if(e)throw G("Error",e.message,"error"),Error();L.value=t.data,B=t.metadata,q.value="\n        File name: ".concat(t.metadata.name,"  - File size: ").concat(t.metadata.size," bytes");var r=new InputEvent("input");L.dispatchEvent(r)})}),y.addEventListener("click",function(){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"csv",n=new Blob([e],{type:"csv"===r?"text/csv;charset=utf-8":"application/json;charset=utf-8"});saveAs(n,"".concat(t))}(W,q.value,H)}),N.addEventListener("click",function(){_.classList.remove("enter"),_.classList.add("exit")})}]);